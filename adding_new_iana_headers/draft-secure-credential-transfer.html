<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Secure Credential Transfer</title>
<meta content="Dmitry Vinokurov" name="author">
<meta content="Matt Byington" name="author">
<meta content="Matthias Lerch" name="author">
<meta content="Alex Pelletier" name="author">
<meta content="Nick Sha" name="author">
<meta content="
       This document describes a mechanism to transfer digital credentials securely between two devices.
Secure credentials may represent a digital key to a hotel room, a digital key to a door lock in a house
or a digital key to a car. Devices that share credentials may belong to the same or two different platforms (e.g. iOS and Android).
Secure transfer may include one or more write and read operations.
Credential transfer needs to be performed securely due to the sensitive nature of the information. 
    " name="description">
<meta content="xml2rfc 3.13.1" name="generator">
<meta content="Internet-Draft" name="keyword">
<meta content="draft-secure-credential-transfer-latest" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.13.1
    Python 3.10.5
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.2
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 3.1.2
    kitchen 1.2.6
    lxml 4.9.1
    MarkupSafe 2.1.1
    pycountry 22.3.5
    pyflakes 2.4.0
    PyYAML 6.0
    requests 2.27.1
    setuptools 59.4.0
    six 1.16.0
-->
<link href="draft-secure-credential-transfer.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Lora SemiBold'), local('Lora-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

:root {
  color-scheme: light dark;
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --pilcrow-weak: #ddd;
  --pilcrow-strong: #bbb;
  --small-font-size: 14.5px;
  --font-mono: 'Oxygen Mono', monospace;
  scrollbar-color: #bbb #eee;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
h1, h2, h3, h4, h5, h6 {
  font-family: "Cabin Condensed", sans-serif;
  font-weight: 600;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
h1#title {
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1#title, h1#rfcnum {
  margin: 1.5em 0 0.2em;
}
h1#rfcnum + h1#title {
  margin: 0.2em 0;
}

h1, h2, h3 {
  font-size: 22px;
  line-height: 27px;
}
h4, h5, h6 {
  font-size: 20px;
  line-height: 24px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
}
#abstract+p {
  font-size: 18px;
  line-height: 24px;
}
#abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 16px;
  line-height: 0;
}

p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
/* font-family isn't space-separated, but =~ will have to do */
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 0.5em 2em;
}
:is(ol, ul) :is(ol, ul) {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
:is(ul, ol).compact, .ulCompact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
  clear: left;
  --indent: 3ch;
  /* --indent: attr(indent ch); not supported in any browser, but we can dream */
}
dl > dt {
  float: left;
  margin-right: 1em;
  min-width: 20ch;
}
dl.dlNewline > dt {
  float: none;
}
dl > dd {
  margin-bottom: .8em;
  margin-left: var(--indent) !important; /* stupid element overrides */
  min-height: 2ex;
}
:is(dl.compact, .dlCompact) > dd {
  margin-bottom: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:first-child, .break:first-child + *) {
  margin-top: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:last-child) {
  margin-bottom: 0;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0;
}
dl .break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href].selfRef {
  color: var(--text-color);
}
a[href] {
  color: var(--link-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px var(--font-mono);
}
tt, code {
  /* changing the font for inline elements leads to different ascender
     and descender heights; as we want to retain baseline alignment,
     remove leading to avoid altering the final height of lines */
  line-height: 0;
}
:is(h1, h2, h3, h4, h5, h6) :is(tt, code) {
  font-size: 84%;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
  padding: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
}
@media screen {
  /* Auto-collapse boilerplate. */
  :is(#status-of-memo, #copyright) p {
    margin: -2px 0;
    max-height: 0;
    transition: max-height 2s ease, margin 0.5s ease 0.5s;
    overflow: hidden;
  }
  :is(#status-of-memo, #copyright):hover p,
  :is(#status-of-memo, #copyright) h2:target ~ p {
    margin: 0.5em 0;
    max-height: 500px;
    overflow: auto;
  }
  pre, svg {
    display: inline-block;
    overflow-x: auto;
  }
  pre {
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  svg {
    max-width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  :is(pre, svg) + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
:is(tr:nth-child(2n), thead+tbody > tr:nth-child(2n+1)) > td {
  background-color: var(--background-color);
}
:is(tr:nth-child(2n+1), thead+tbody > tr:nth-child(2n)) > td {
  background-color: var(--highlight-color);
}
table caption {
  margin: 0;
  padding: 3px 0 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  opacity: 0.2;
  user-select: none;
}
a.pilcrow[href] { color: var(--pilcrow-weak); }
a.pilcrow[href]:hover { text-decoration: none; }
@media not print {
  :hover > a.pilcrow {
    opacity: 1;
  }
  a.pilcrow[href]:hover {
    color: var(--pilcrow-strong);
    background-color: transparent;
  }
}
@media print {
  a.pilcrow {
    display: none;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
  font-weight: 600;
  font-size: 14.5px;
}
.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 15ch;
}
#identifiers dt {
  width: var(--identifier-width);
  min-width: var(--identifier-width);
  clear: left;
  float: left;
  text-align: right;
}
#identifiers dd {
  margin: 0;
  margin-left: calc(1em + var(--identifier-width)) !important;
  min-width: 5em;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
#toc nav ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
#toc nav li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
#toc a.xref {
  white-space: normal;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dt:target::before {
  content: "⇒";
  width: 15px;
  margin: 0 10px 0 -25px;
}
.references dd {
  margin-left: 8em !important;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
#rfc\.index\.index + ul {
  margin-left: 0;
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}
address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc.active {
      opacity: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 8px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active nav {
    display: block;
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin-top: 2px;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  #toc nav > ul  {
    margin-bottom: 2em;
  }
  #toc ul {
    margin: 0 0 0 4px;
    font-size: var(--small-font-size);
  }
  #toc ul :is(p, li) {
    margin: 2px 0;
    line-height: 22px;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Changes introduced to fix issues found during implementation */

/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}

/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin: 8px 0.5em 0;
}

/* Provide styling for table cell text alignment */
table .text-left {
  text-align: left;
}
table .text-center {
  text-align: center;
}
table .text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 20em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Give the table caption label the same styling as the figcaption */

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  dd {
    page-break-before: avoid;
  }
  .vcard {
    page-break-inside: avoid;
  }

}

/* Dark mode. */
@media (prefers-color-scheme: dark) {
:root {
  --background-color: #121212;
  --text-color: #f0f0f0;
  --title-color: #fff;
  --link-color: #4da4f0;
  --highlight-color: #282828;
  --line-color: #444;
  --pilcrow-weak: #444;
  --pilcrow-strong: #666;
  scrollbar-color: #777 #333;
}
}

/* SVG Trick: a prefix match works because only black and white are allowed */
svg :is([stroke="black"], [stroke^="#000"]) {
  stroke: var(--text-color);
}
svg :is([stroke="white"], [stroke^="#fff"]) {
  stroke: var(--background-color);
}
svg :is([fill="black"], [fill^="#000"], :not([fill])) {
  fill: var(--text-color);
}
svg :is([stroke="fill"], [fill^="#fff"]) {
  fill: var(--background-color);
}
</style>

</head>
<body>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">Secure Credential Transfer</td>
<td class="right">August 2022</td>
</tr></thead>
<tfoot><tr>
<td class="left">Vinokurov, et al.</td>
<td class="center">Expires 18 February 2023</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">TODO Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-secure-credential-transfer-latest</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2022-08-17" class="published">17 August 2022</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2023-02-18">18 February 2023</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">D. Vinokurov</div>
<div class="org">Apple Inc</div>
</div>
<div class="author">
      <div class="author-name">M. Byington</div>
<div class="org">Apple Inc</div>
</div>
<div class="author">
      <div class="author-name">M. Lerch</div>
<div class="org">Apple Inc</div>
</div>
<div class="author">
      <div class="author-name">A. Pelletier</div>
<div class="org">Apple Inc</div>
</div>
<div class="author">
      <div class="author-name">N. Sha</div>
<div class="org">Alphabet Inc</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Secure Credential Transfer</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document describes a mechanism to transfer digital credentials securely between two devices.
Secure credentials may represent a digital key to a hotel room, a digital key to a door lock in a house
or a digital key to a car. Devices that share credentials may belong to the same or two different platforms (e.g. iOS and Android).
Secure transfer may include one or more write and read operations.
Credential transfer needs to be performed securely due to the sensitive nature of the information.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<section class="note rfcEditorRemove" id="section-note.1">
      <h2 id="name-discussion-venues">
<a href="#name-discussion-venues" class="section-name selfRef">Discussion Venues</a>
      </h2>
<p id="section-note.1-1">This note is to be removed before publishing as an RFC.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
<p id="section-note.1-2">Source for this draft and an issue tracker can be found at
    <span><a href="https://github.com/dimmyvi/secure-credential-transfer">https://github.com/dimmyvi/secure-credential-transfer</a></span>.<a href="#section-note.1-2" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 18 February 2023.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2022 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="xref">2</a>.  <a href="#name-terminology" class="xref">Terminology</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-credential-transfer-workflo" class="xref">Credential transfer workflows</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1" class="keepWithNext"><a href="#section-3.1" class="xref">3.1</a>.  <a href="#name-stateless-workflow" class="xref">Stateless workflow</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="xref">3.2</a>.  <a href="#name-stateful-workflow" class="xref">Stateful workflow</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="xref">3.3</a>.  <a href="#name-provisioning-information-st" class="xref">Provisioning Information Structure</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.1">
                    <p id="section-toc.1-1.3.2.3.2.1.1"><a href="#section-3.3.1" class="xref">3.3.1</a>.  <a href="#name-provisioning-information-fo" class="xref">Provisioning Information Format</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.2">
                    <p id="section-toc.1-1.3.2.3.2.2.1"><a href="#section-3.3.2" class="xref">3.3.2</a>.  <a href="#name-provisioning-information-en" class="xref">Provisioning Information Encryption</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4">
                <p id="section-toc.1-1.3.2.4.1"><a href="#section-3.4" class="xref">3.4</a>.  <a href="#name-share-url" class="xref">Share URL</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4.2.1">
                    <p id="section-toc.1-1.3.2.4.2.1.1"><a href="#section-3.4.1" class="xref">3.4.1</a>.  <a href="#name-credential-vertical-in-shar" class="xref">Credential Vertical in Share URL</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-api-connection-details" class="xref">API connection details</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-http-headers" class="xref">HTTP Headers</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-mailbox-request-id" class="xref">Mailbox-Request-ID</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="xref">5.2</a>.  <a href="#name-device-claim" class="xref">Device-Claim</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="xref">5.3</a>.  <a href="#name-device-attestation" class="xref">Device-Attestation</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-http-access-methods" class="xref">HTTP access methods</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="xref">6.1</a>.  <a href="#name-createmailbox" class="xref">CreateMailbox</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1.2.1">
                    <p id="section-toc.1-1.6.2.1.2.1.1"><a href="#section-6.1.1" class="xref">6.1.1</a>.  <a href="#name-endpoint" class="xref">Endpoint</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1.2.2">
                    <p id="section-toc.1-1.6.2.1.2.2.1"><a href="#section-6.1.2" class="xref">6.1.2</a>.  <a href="#name-request-parameters" class="xref">Request Parameters:</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1.2.3">
                    <p id="section-toc.1-1.6.2.1.2.3.1"><a href="#section-6.1.3" class="xref">6.1.3</a>.  <a href="#name-consumes" class="xref">Consumes</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1.2.4">
                    <p id="section-toc.1-1.6.2.1.2.4.1"><a href="#section-6.1.4" class="xref">6.1.4</a>.  <a href="#name-produces" class="xref">Produces</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1.2.5">
                    <p id="section-toc.1-1.6.2.1.2.5.1"><a href="#section-6.1.5" class="xref">6.1.5</a>.  <a href="#name-request-body" class="xref">Request body</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1.2.6">
                    <p id="section-toc.1-1.6.2.1.2.6.1"><a href="#section-6.1.6" class="xref">6.1.6</a>.  <a href="#name-responses" class="xref">Responses</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="xref">6.2</a>.  <a href="#name-updatemailbox" class="xref">UpdateMailbox</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.1">
                    <p id="section-toc.1-1.6.2.2.2.1.1"><a href="#section-6.2.1" class="xref">6.2.1</a>.  <a href="#name-endpoint-2" class="xref">Endpoint</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.2">
                    <p id="section-toc.1-1.6.2.2.2.2.1"><a href="#section-6.2.2" class="xref">6.2.2</a>.  <a href="#name-request-parameters-2" class="xref">Request Parameters</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.3">
                    <p id="section-toc.1-1.6.2.2.2.3.1"><a href="#section-6.2.3" class="xref">6.2.3</a>.  <a href="#name-consumes-2" class="xref">Consumes</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.4">
                    <p id="section-toc.1-1.6.2.2.2.4.1"><a href="#section-6.2.4" class="xref">6.2.4</a>.  <a href="#name-produces-2" class="xref">Produces</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.5">
                    <p id="section-toc.1-1.6.2.2.2.5.1"><a href="#section-6.2.5" class="xref">6.2.5</a>.  <a href="#name-request-body-2" class="xref">Request body</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.6">
                    <p id="section-toc.1-1.6.2.2.2.6.1"><a href="#section-6.2.6" class="xref">6.2.6</a>.  <a href="#name-responses-2" class="xref">Responses</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3">
                <p id="section-toc.1-1.6.2.3.1"><a href="#section-6.3" class="xref">6.3</a>.  <a href="#name-deletemailbox" class="xref">DeleteMailbox</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3.2.1">
                    <p id="section-toc.1-1.6.2.3.2.1.1"><a href="#section-6.3.1" class="xref">6.3.1</a>.  <a href="#name-endpoint-3" class="xref">Endpoint</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3.2.2">
                    <p id="section-toc.1-1.6.2.3.2.2.1"><a href="#section-6.3.2" class="xref">6.3.2</a>.  <a href="#name-request-parameters-3" class="xref">Request Parameters</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3.2.3">
                    <p id="section-toc.1-1.6.2.3.2.3.1"><a href="#section-6.3.3" class="xref">6.3.3</a>.  <a href="#name-responses-3" class="xref">Responses</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4">
                <p id="section-toc.1-1.6.2.4.1"><a href="#section-6.4" class="xref">6.4</a>.  <a href="#name-readdisplayinformationfromm" class="xref">ReadDisplayInformationFromMailbox</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4.2.1">
                    <p id="section-toc.1-1.6.2.4.2.1.1"><a href="#section-6.4.1" class="xref">6.4.1</a>.  <a href="#name-endpoint-4" class="xref">Endpoint</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4.2.2">
                    <p id="section-toc.1-1.6.2.4.2.2.1"><a href="#section-6.4.2" class="xref">6.4.2</a>.  <a href="#name-request-parameters-4" class="xref">Request Parameters</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4.2.3">
                    <p id="section-toc.1-1.6.2.4.2.3.1"><a href="#section-6.4.3" class="xref">6.4.3</a>.  <a href="#name-produces-3" class="xref">Produces</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4.2.4">
                    <p id="section-toc.1-1.6.2.4.2.4.1"><a href="#section-6.4.4" class="xref">6.4.4</a>.  <a href="#name-responses-4" class="xref">Responses</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.5">
                <p id="section-toc.1-1.6.2.5.1"><a href="#section-6.5" class="xref">6.5</a>.  <a href="#name-readsecurecontentfrommailbo" class="xref">ReadSecureContentFromMailbox</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.5.2.1">
                    <p id="section-toc.1-1.6.2.5.2.1.1"><a href="#section-6.5.1" class="xref">6.5.1</a>.  <a href="#name-endpoint-5" class="xref">Endpoint</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.5.2.2">
                    <p id="section-toc.1-1.6.2.5.2.2.1"><a href="#section-6.5.2" class="xref">6.5.2</a>.  <a href="#name-request-parameters-5" class="xref">Request Parameters</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.5.2.3">
                    <p id="section-toc.1-1.6.2.5.2.3.1"><a href="#section-6.5.3" class="xref">6.5.3</a>.  <a href="#name-produces-4" class="xref">Produces</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.5.2.4">
                    <p id="section-toc.1-1.6.2.5.2.4.1"><a href="#section-6.5.4" class="xref">6.5.4</a>.  <a href="#name-responses-5" class="xref">Responses</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.6">
                <p id="section-toc.1-1.6.2.6.1"><a href="#section-6.6" class="xref">6.6</a>.  <a href="#name-relinquishmailbox" class="xref">RelinquishMailbox</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.6.2.1">
                    <p id="section-toc.1-1.6.2.6.2.1.1"><a href="#section-6.6.1" class="xref">6.6.1</a>.  <a href="#name-endpoint-6" class="xref">Endpoint</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.6.2.2">
                    <p id="section-toc.1-1.6.2.6.2.2.1"><a href="#section-6.6.2" class="xref">6.6.2</a>.  <a href="#name-request-parameters-6" class="xref">Request Parameters</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.6.2.3">
                    <p id="section-toc.1-1.6.2.6.2.3.1"><a href="#section-6.6.3" class="xref">6.6.3</a>.  <a href="#name-responses-6" class="xref">Responses</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-security-considerations" class="xref">Security Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="xref">7.1</a>.  <a href="#name-sender-receiver-privacy" class="xref">Sender/Receiver privacy</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="xref">7.2</a>.  <a href="#name-credentials-confidentiality" class="xref">Credential's confidentiality and integrity</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.3">
                <p id="section-toc.1-1.7.2.3.1"><a href="#section-7.3" class="xref">7.3</a>.  <a href="#name-second-factor-authenticatio" class="xref">Second factor authentication for Receiver credential provisioning</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-iana-considerations" class="xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-references" class="xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a href="#section-9.1" class="xref">9.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a href="#section-9.2" class="xref">9.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#appendix-A" class="xref">Appendix A</a>.  <a href="#name-contributors" class="xref">Contributors</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#appendix-B" class="xref">Appendix B</a>.  <a href="#name-acknowledgments" class="xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#appendix-C" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">Today, there is no standard way of transferring digital credentials securely between two devices
belonging to the same platform or two different platforms. This document proposes a solution to this problem
by introducing a Relay server which allows two devices to exchange encrypted Provisioning Information securely.
The Relay server solves this problem by creating and managing temporary mailbox storage.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">Each mailbox can be referenced by devices using a unique mailbox identifier in a URL.
The URL pointing to encrypted Provisioning Information is to be passed between devices directly
over various channels (e.g. SMS, email, messaging applications).
The Security Considerations section provides recommendations on passing the URL and the Secret securely.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">This document describes a Hypertext (HTTP) Application Programming Interface (API) that allows
Sender and Receiver devices to interact with a Relay server in order to perform secure credential transfer.<a href="#section-1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="terminology">
<section id="section-2">
      <h2 id="name-terminology">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
      </h2>
<p id="section-2-1">The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
"<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
described in BCP 14 <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="xref">RFC8174</a>]</span> when, and only when, they
appear in all capitals, as shown here.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">General terms:<a href="#section-2-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-3.1">Relay Server - Web application exposing Secure Credential Transfer API to devices. It serves to securely transfer Provisioning Information between two devices (Sender and Receiver).<a href="#section-2-3.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-3.2">Sender device - a device initiating a transfer of Provisioning Information to a Receiver device so that Receiver can register or provision this credential.<a href="#section-2-3.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-3.3">Receiver device - a device that receives Provisioning Information from Sender device and uses it to register or provision Credential Information.<a href="#section-2-3.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-3.4">Provisioning Partner - an entity which facilitates Credential Information lifecycle on a device. Lifecycle may include provisioning of credential, credential termination, credential update. API to Provisioning Partner is out of scope for this document.<a href="#section-2-3.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-3.5">Provisioning Information - a set of data fields, allowing a device to generate Credential Information or receive it from Provisioning Partner and install it locally. The entire content of Provisioning Information is encrypted by Sender or Receiver device. Therefore, it is not visible to the Relay Server.
The structure of Provisioning Information is specific to Provisioning Partner or type of Credential and out of the scope of this document.<a href="#section-2-3.5" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-3.6">Credential Information - a set of data fields used to facilitate registration or provisioning of Credential Information on the Receiver's device.<a href="#section-2-3.6" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-3.7">Secret - a symmetric encryption key shared by a pair of Sender and Receiver devices, used to encrypt Provisioning Information stored on the Relay server. Secret stays the same for the entire credential transfer flow (one Secret per complete transfer). Provisioning Information stored on Relay server is always encrypted using the Secret. In Stateful flow all information exchanged by Sender and Receiver devices through Relay server is encrypted with the same Secret. Thus, effectively, Secret has a one-to-one relation with the mailbox.<a href="#section-2-3.7" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-3.8">Credential Vertical - The broad industry vertical that the credential belongs to. For example, the credential could belong to the car or home vertical.<a href="#section-2-3.8" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-2-4">API parameters:<a href="#section-2-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-5.1">Device Claim - a unique token allowing the caller to read from / write data to the mailbox. Exactly one Sender device and one Receiver device <span class="bcp14">SHOULD</span> be able to read from / write secure payload to the mailbox. Sender device provides a Device Claim in order to create a mailbox. When the Relay server, having received a request from the Sender device, creates a mailbox, it binds this Sender's Device Claim to the mailbox. When the Receiver device first reads data from the mailbox it presents its Device Claim to the Relay Server, which binds the mailbox to the given Receiver device. Thus, both Sender and Receiver devices are bound to the mailbox (allowed to read from / write to it). Only Sender and Receiver devices that present valid Device Claims are allowed to send subsequent read/update/delete calls to the mailbox. The value <span class="bcp14">SHALL</span> be a unique UUID <span>[<a href="#RFC4122" class="xref">RFC4122</a>]</span>. Sender and Receiver <span class="bcp14">MUST</span> use different values for Device Claim. Implementation <span class="bcp14">SHOULD</span> assign unique values for new mailboxes (avoid re-using values).<a href="#section-2-5.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-5.2">Notification Token - a short or long-lived unique token stored by the Sender or Receiver device in a mailbox on the Relay server, which allows Relay server to send a push notification to the Sender or Receiver device, informing them of updates in the mailbox.<a href="#section-2-5.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-5.3">MailboxIdentifier - a unique identifier for the given mailbox, generated by the Relay server at the time of mailbox creation. The value is a UUID <span>[<a href="#RFC4122" class="xref">RFC4122</a>]</span>.<a href="#section-2-5.3" class="pilcrow">¶</a>
</li>
      </ul>
</section>
</div>
<div id="credential-transfer-workflows">
<section id="section-3">
      <h2 id="name-credential-transfer-workflo">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-credential-transfer-workflo" class="section-name selfRef">Credential transfer workflows</a>
      </h2>
<p id="section-3-1">We define two flows for credential transfer: 1. Stateless (Relay server facilitates a single credential data transfer: Sender -&gt; Relay -&gt; Receiver) and 2. Stateful (Relay server facilitates additional data transfers - there are multiple data transfers in this flow to prepare credential data for registering or provisioning by Receiver). Relay server does not limit the number of such data tranfsfers between Sender and Receiver devices. The details are provided below.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">Both stateless and stateful share the following common steps.
The processes start with a Sender device composing a set of Provisioning Information, encrypting it with a Secret and storing encrypted Provisioning Information on a Relay server in a mailbox. A unique Mailbox Identifier is generated by the Relay server as a part of CreateMailbox call, created using a good source of entropy (preferably hardware-based entropy). Sender device generates a unique token - a Sender Device Claim - and stores it to the mailbox. Device Claim allows the Sender device presenting it to read and write data to / from the mailbox, thus binding it to the mailbox.<a href="#section-3-2" class="pilcrow">¶</a></p>
<p id="section-3-3">Sender device calls CreateMailbox API endpoint on a Relay server in order to create a mailbox.
Once a mailbox is created, it has limited livetime. When expired, the mailbox <span class="bcp14">SHALL</span> be deleted - refer to DeleteMailbox endpoint. Mailbox configuration has a required "expiration" parameter in the request for the CreateMailbox call (refer to mailboxConfiguration request parameter). Relay server is responsible to periodically check for mailboxes that are past the expiration time and delete them.<a href="#section-3-3" class="pilcrow">¶</a></p>
<p id="section-3-4">Relay server builds a unique URL link to a mailbox (for example, "https://relayserver.example.com/v1/m/1234567890") and returns it to the Sender device, which sends the link directly to the Receiver device over communication channel (e.g. SMS, email, iMessage).
Please refer to section "Security Considerations" for more details.<a href="#section-3-4" class="pilcrow">¶</a></p>
<p id="section-3-5">Receiver device, having obtained both the URL link and the Secret, generates a unique token - a Receiver Device Claim - and passes it to the Relay server in order to read the encrypted Provisioning Information from the mailbox.<a href="#section-3-5" class="pilcrow">¶</a></p>
<p id="section-3-6">Relay server has finally a given pair of Sender and Receiver devices bound to the mailbox by provided Sender (at the time of mailbox creation) and Receiver (at the time of reading secure content from the mailbox) Device Claims. Only bound devices are allowed to read or write data to the mailbox or to delete the mailbox.<a href="#section-3-6" class="pilcrow">¶</a></p>
<div id="stateless-workflow">
<section id="section-3.1">
        <h3 id="name-stateless-workflow">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-stateless-workflow" class="section-name selfRef">Stateless workflow</a>
        </h3>
<p id="section-3.1-1">The stateless workflow completes the common steps described in "Credential transfer workflows" section, then finishes the transfer completing the following steps.
Receiver device, having read the encrypted Provisioning Information from the Relay mailbox, decrypts it with the Secret received from the Sender and starts credential registering or provisioning process on the device. Once the Receiver device has successfully provisioned credentials, it deletes the mailbox by sending a DeleteMailbox call to the Relay server.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<span id="name-sample-stateless-workflow"></span><div id="stateless-flow-image">
<figure id="figure-1">
          <div class="alignLeft art-text artwork" id="section-3.1-2.1">
<pre>
                      Sender              Relay                          Receiver
                        |                   |                               |
    Create mailbox with | CreateMailbox     |                               |
    Provisioning Info   |——----------------&gt;|                               |
    encrypted with      |&lt;&lt;-.-.-.-.-.-.-.-.-|                               |
    Secret              |URL link to mailbox|                               |
                        |                   |                               |
    Send URL link to    |                   |     URL link and Secret       |
    mailbox and Secret  |--------------------------------------------------&gt;|
                        |                   |                               |
                        |                   | ReadSecureContentFromMailbox  |
                        |                   |&lt;------------------------------|
                        |                   |-.-.-.-.-.-.-.-.-.-.-.-.-.-.-&gt;&gt;| Decrypt with Secret to get Prov Info
                        |                   |         encrypted info        |
                        |                   |                               |
                        |                   |         DeleteMailbox         |
                        |                   |&lt;------------------------------| Provision or Register credentials
                        |                   |-.-.-.-.-.-.-.-.-.-.-.-.-.-.-&gt;&gt;|
                        |                   |              OK               |
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-sample-stateless-workflow" class="selfRef">Sample stateless workflow</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="stateful-workflow">
<section id="section-3.2">
        <h3 id="name-stateful-workflow">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-stateful-workflow" class="section-name selfRef">Stateful workflow</a>
        </h3>
<p id="section-3.2-1">The stateful workflow completes the common steps described in "Credential transfer workflows" section, then finishes the transfer completing the following steps.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2-2">Then the Receiver device, having downloaded the encrypted Provisioning Information from the mailbox by URL and decrypted it with the Secret, generates a new structure of Provisioning Information, e.g. a digital key, and encrypts it with the same Secret, received from the Sender device. It then stores the payload in the same mailbox on the Relay server. In addition to the encrypted payload, Receiver stores a Receiver Notification Token in the given mailbox.<a href="#section-3.2-2" class="pilcrow">¶</a></p>
<p id="section-3.2-3">Having received the encrypted Provisioning Information, the Relay server sends a Notification to the Sender device using the Sender Notification Token.<a href="#section-3.2-3" class="pilcrow">¶</a></p>
<p id="section-3.2-4">Sender device, having received the notification from the Relay server, reads secure content from the mailbox and decrypts all using the same Secret. Sender device generates new Provisioning Information, encrypts all fields using the Secret and stores all data in the same  mailbox on the Relay server.<a href="#section-3.2-4" class="pilcrow">¶</a></p>
<p id="section-3.2-5">Relay server, having stored the data above, sends a notification to the Receiver device using Receiver Notification Token. Receiver device, having received the notification, reads the encrypted Provisioning Information, decrypts the data using the same Secret and uses this data to finalize credential registration or provisioning on device.<a href="#section-3.2-5" class="pilcrow">¶</a></p>
<p id="section-3.2-6">Once the Receiver device has successfully registered or provisioned credentials, it deletes the mailbox by sending a DeleteMailbox call to the Relay server.
Sender device may terminate the secure credential transfer by deleting the mailbox it created at any time. Deletion of the mailbox on the Relay server stops any on-going credential transfer process.<a href="#section-3.2-6" class="pilcrow">¶</a></p>
<span id="name-sample-stateful-workflow"></span><div id="stateful-flow-image">
<figure id="figure-2">
          <div class="alignLeft art-text artwork" id="section-3.2-7.1">
<pre>
                     Sender                       Relay                         Receiver
                       |                             |                             |
    Create and encrypt |       CreateMailbox         |                             |
    Provisioning Info 1|----------------------------&gt;|                             |
    encrypted with     |&lt;&lt;-.-.-.-.-.-.-.-.-.-.-.-.-.-|                             |
    Secret             |    URL link to mailbox      |                             |
                       |                             |                             |
                       |                             |    URL link and Secret      |
    Send URL link to   |----------------------------------------------------------&gt;|
    mailbox and Secret |                             |                             |
                       |                             |ReadSecureContentFromMailbox |
                       |                             |&lt;----------------------------|
                       |                             |-.-.-.-.-.-.-.-.-.-.-.-.-.-&gt;&gt;| Decrypt with Secret for ProvInfo1
                       |                             |       encrypted info        |
                       |                             |                             |
                       |                             |UpdateMailbox(encrypted info)| Update with ProvInfo2
                       |                             |&lt;----------------------------| encrypted with Secret
                       |   Push Notification         |-.-.-.-.-.-.-.-.-.-.-.-.-.-&gt;&gt;| ProvInfo2 = new Provisioning Info
                       |&lt;............................|             OK              |
                       |                             |                             |
                       |ReadSecureContentFromMailbox |                             |
                       |----------------------------&gt;|                             |
   Decrypt with Secret |&lt;&lt;-.-.-.-.-.-.-.-.-.-.-.-.-.-|                             |
   to get ProvInfo2    |       encrypted info        |                             |
                       |                             |                             |
                       |UpdateMailbox(encrypted info)|                             |
   Update with         |—-----------—---------------&gt;|                             |
   ProvInfo3 encrypted |&lt;&lt;-.-.-.-.-.-.-.-.-.-.-.-.-.-|  Push Notification          |
   with Secret.        |             OK              |............................&gt;|
   ProvInfo3 = new     |                             |                             |
   Provisioning Info   |                             |ReadSecureContentFromMailbox |
                       |                             |&lt;----------------------------|
                       |                             |-.-.-.-.-.-.-.-.-.-.-.-.-.-&gt;&gt;| Decrypt with Secret for ProvInfo3
                       |                             |        encrypted info       |
                       |                             |                             |
                       |                             |        DeleteMailbox        |
                       |                             |&lt;----------------------------| Provision or Register credentials
                       |                             |-.-.-.-.-.-.-.-.-.-.-.-.-.-&gt;&gt;|
                       |                             |             OK              |
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-sample-stateful-workflow" class="selfRef">Sample stateful workflow</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="provisioning-information-structure">
<section id="section-3.3">
        <h3 id="name-provisioning-information-st">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-provisioning-information-st" class="section-name selfRef">Provisioning Information Structure</a>
        </h3>
<p id="section-3.3-1">The Provisioning Information is the data transfered via the Relay Server between the Sender device and Receiver device. Each use case defines its own specalized Provisioning Information format, but all formats must at least adhear to the following structure. Formats are free to define new top level keys, so clients shouldn't be surprised if a message of an unexpected format has specialized top level keys.<a href="#section-3.3-1" class="pilcrow">¶</a></p>
<table class="center" id="table-1">
          <caption><a href="#table-1" class="selfRef">Table 1</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Key</th>
              <th class="text-left" rowspan="1" colspan="1">Type</th>
              <th class="text-left" rowspan="1" colspan="1">Required</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">format</td>
              <td class="text-left" rowspan="1" colspan="1">String</td>
              <td class="text-left" rowspan="1" colspan="1">Yes</td>
              <td class="text-left" rowspan="1" colspan="1">The Provisioning Information format that the message follows. This is used by the Sender device and Receiver device to know how to parse the message.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">content</td>
              <td class="text-left" rowspan="1" colspan="1">Dictionary</td>
              <td class="text-left" rowspan="1" colspan="1">Yes</td>
              <td class="text-left" rowspan="1" colspan="1">A dictionary of content to be used for the credential transfer. See each format's specification for exact fields.</td>
            </tr>
          </tbody>
        </table>
<div id="provisioning-information-format">
<section id="section-3.3.1">
          <h4 id="name-provisioning-information-fo">
<a href="#section-3.3.1" class="section-number selfRef">3.3.1. </a><a href="#name-provisioning-information-fo" class="section-name selfRef">Provisioning Information Format</a>
          </h4>
<p id="section-3.3.1-1">Each Provisioning Information format must have the message structure defined in an external specification.<a href="#section-3.3.1-1" class="pilcrow">¶</a></p>
<table class="center" id="table-2">
            <caption><a href="#table-2" class="selfRef">Table 2</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Format Type</th>
                <th class="text-left" rowspan="1" colspan="1">Spec Link</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">digitalwallet.carkey.ccc</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <span>[<a href="#CCC-Digital-Key-30" class="xref">CCC-Digital-Key-30</a>]</span>
</td>
                <td class="text-left" rowspan="1" colspan="1">A digital wallet Provisioning Information for sharing a car key that follows the Car Connectivity Consortium specification.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">digitalwallet.generic.authorizationToken</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <span>[<a href="#ISO-18013-5" class="xref">ISO-18013-5</a>]</span>
</td>
                <td class="text-left" rowspan="1" colspan="1">A digital wallet Provisioning Information for sharing a generic pass that relies solely on an authorization token.</td>
              </tr>
            </tbody>
          </table>
<span id="name-provisioning-information-for"></span><div id="provisioning-info-format">
<figure id="figure-3">
            <div class="alignLeft art-text artwork" id="section-3.3.1-3.1">
<pre>
{
   "format" : "digitalwallet.carkey.ccc",
   "content": {
      // Format specific fields
   }
}
</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-provisioning-information-for" class="selfRef">Provisioning Information format</a>
            </figcaption></figure>
</div>
</section>
</div>
<div id="provisioning-information-encryption">
<section id="section-3.3.2">
          <h4 id="name-provisioning-information-en">
<a href="#section-3.3.2" class="section-number selfRef">3.3.2. </a><a href="#name-provisioning-information-en" class="section-name selfRef">Provisioning Information Encryption</a>
          </h4>
<p id="section-3.3.2-1">Provisioning Information will be stored on the Relay Server encrypted. The Secret used to encrypt the Provisioning Information should be given to the Receiver Device via a "Share URL" (a URL link to a mailbox). The encrypted payload should be a data structure having the following key-value pairs:<a href="#section-3.3.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3.2-2.1">"type" (String, Required) - the encryption algorithm and mode used.<a href="#section-3.3.2-2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.3.2-2.2">"data" (String, Required) - Base64 encoded binary value of the encrypted Provisioning Information, aka the ciphertext.<a href="#section-3.3.2-2.2" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-3.3.2-3">Please refer to <span>[<a href="#RFC5116" class="xref">RFC5116</a>]</span> for the details of the encryption algorithm.<a href="#section-3.3.2-3" class="pilcrow">¶</a></p>
<p id="section-3.3.2-4">The following algorithms and modes are mandatory to implement:<a href="#section-3.3.2-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3.2-5.1">"AEAD_AES_128_GCM": AES symmetric encryption algorithm with key length 128 bits, in GCM mode with no padding.  Initialization Vector (IV) has the length of 96 bits randomly generated and tag length of 128 bits.<a href="#section-3.3.2-5.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.3.2-5.2">"AEAD_AES_256_GCM": AES symmetric encryption algorithm with key length 256 bits, in GCM mode with no padding.  Initialization Vector (IV) has the length of 96 bits randomly generated and tag length of 128 bits.<a href="#section-3.3.2-5.2" class="pilcrow">¶</a>
</li>
          </ul>
<span id="name-secure-payload-format-examp"></span><div id="secure-payload-format">
<figure id="figure-4">
            <div class="alignLeft art-text artwork" id="section-3.3.2-6.1">
<pre>
{
    "type" : "AEAD_AES_128_GCM",
    "data" : "IV  ciphertext  tag"
}
</pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-secure-payload-format-examp" class="selfRef">Secure Payload Format example</a>
            </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
<div id="share-url">
<section id="section-3.4">
        <h3 id="name-share-url">
<a href="#section-3.4" class="section-number selfRef">3.4. </a><a href="#name-share-url" class="section-name selfRef">Share URL</a>
        </h3>
<p id="section-3.4-1">A "Share URL" is the url a Sender device sends to the Receiver device allowing it to retrieve the Provisioning Information stored on the Relay Server. A Share URL is made up of the following fields:<a href="#section-3.4-1" class="pilcrow">¶</a></p>
<span id="name-share-url-example"></span><div id="share-url-example">
<figure id="figure-5">
          <div class="alignLeft art-text artwork" id="section-3.4-2.1">
<pre>
https://{RelayServerHost}/v{ApiVersion}/m/{MailboxIdentifier}?v={CredentialVertical}#{Secret}
</pre>
</div>
<figcaption><a href="#figure-5" class="selfRef">Figure 5</a>:
<a href="#name-share-url-example" class="selfRef">Share URL example</a>
          </figcaption></figure>
</div>
<table class="center" id="table-3">
          <caption><a href="#table-3" class="selfRef">Table 3</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Field</th>
              <th class="text-left" rowspan="1" colspan="1">Location</th>
              <th class="text-left" rowspan="1" colspan="1">Required</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">RelayServerHost</td>
              <td class="text-left" rowspan="1" colspan="1">URL Host</td>
              <td class="text-left" rowspan="1" colspan="1">Yes</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">ApiVersion</td>
              <td class="text-left" rowspan="1" colspan="1">URI Path Parameter</td>
              <td class="text-left" rowspan="1" colspan="1">Yes</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">MailboxIdentifier</td>
              <td class="text-left" rowspan="1" colspan="1">URI Path Parameter</td>
              <td class="text-left" rowspan="1" colspan="1">Yes</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">CredentialVertical</td>
              <td class="text-left" rowspan="1" colspan="1">Query Parameter</td>
              <td class="text-left" rowspan="1" colspan="1">No</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Secret</td>
              <td class="text-left" rowspan="1" colspan="1">Fragment</td>
              <td class="text-left" rowspan="1" colspan="1">No</td>
            </tr>
          </tbody>
        </table>
<div id="credential-vertical-in-share-url">
<section id="section-3.4.1">
          <h4 id="name-credential-vertical-in-shar">
<a href="#section-3.4.1" class="section-number selfRef">3.4.1. </a><a href="#name-credential-vertical-in-shar" class="section-name selfRef">Credential Vertical in Share URL</a>
          </h4>
<p id="section-3.4.1-1">When a user interacts with a share URL on a Receiver device it can be helpful to know what Credential Vertical this share is for. This is particularly important if the Receiver device has multiple applications that can handle a share URL. For example, a Receiver device might want to handle a general access share in their wallet app, but handle car key shares in a specific car application.<a href="#section-3.4.1-1" class="pilcrow">¶</a></p>
<p id="section-3.4.1-2">To properly route a share URL, the sender can include the Credential Vertical in the share URL as a query parameter. The Credential Vertical can't be included in the encrypted payload because the Receiver device might need to open the right application before retrieving the secure payload. The Credential Vertical query parameter uses the "v" key and supports the below types. If no Credential Vertical is provided it will be assumed that this is a general access share URL.<a href="#section-3.4.1-2" class="pilcrow">¶</a></p>
<table class="center" id="table-4">
            <caption><a href="#table-4" class="selfRef">Table 4</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Vertical</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">General Access</td>
                <td class="text-left" rowspan="1" colspan="1">a or <em>None</em>
</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Home Key</td>
                <td class="text-left" rowspan="1" colspan="1">h</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Car Key</td>
                <td class="text-left" rowspan="1" colspan="1">c</td>
              </tr>
            </tbody>
          </table>
<span id="name-car-key-share-url-example"></span><div id="car-key-share-url-example">
<figure id="figure-6">
            <div class="alignLeft art-text artwork" id="section-3.4.1-4.1">
<pre>
https://relayserver.example.com/v1/m/2bba630e-519b-11ec-bf63-0242ac130002?v=c#hXlr6aRC7KgJpOLTNZaLsw==
</pre>
</div>
<figcaption><a href="#figure-6" class="selfRef">Figure 6</a>:
<a href="#name-car-key-share-url-example" class="selfRef">Car Key Share URL example</a>
            </figcaption></figure>
</div>
<p id="section-3.4.1-5">The Credential Vertical query parameter can be added to the share URL by the Sender device when constructing the full share URL that is going to be sent to the Receiver device.<a href="#section-3.4.1-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="api-connection-details">
<section id="section-4">
      <h2 id="name-api-connection-details">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-api-connection-details" class="section-name selfRef">API connection details</a>
      </h2>
<p id="section-4-1">The Relay server API endpoint <span class="bcp14">MUST</span> be accessed over HTTP using an https URI <span>[<a href="#RFC2818" class="xref">RFC2818</a>]</span> and <span class="bcp14">SHOULD</span> use the default https port.
Request and response bodies <span class="bcp14">SHALL</span> be formatted as either JSON or HTML (based on the API endpoint). The communication protocol used for all interfaces <span class="bcp14">SHALL</span> be HTTPs.
All Strings <span class="bcp14">SHOULD</span> be UTF-8 encoded (Unicode Normalization Form C (NFC)).
An API version <span class="bcp14">SHOULD</span> be included in the URI for all interfaces. The version at the time of this document's latest update is v1. The version <span class="bcp14">SHALL</span> be incremented by 1 for major API changes or backward incompatible iterations on existing APIs.<a href="#section-4-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="http-headers">
<section id="section-5">
      <h2 id="name-http-headers">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-http-headers" class="section-name selfRef">HTTP Headers</a>
      </h2>
<div id="mailbox-request-id">
<section id="section-5.1">
        <h3 id="name-mailbox-request-id">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-mailbox-request-id" class="section-name selfRef">Mailbox-Request-ID</a>
        </h3>
<p id="section-5.1-1">All requests to and from Relay server will have an HTTP header "Mailbox-Request-ID". The corresponding response to the API will have the same HTTP header, which <span class="bcp14">SHALL</span> echo the value in the request header. This is used to identify the request associated to the response for a particular API request and response pair. The value <span class="bcp14">SHOULD</span> be a UUID <span>[<a href="#RFC4122" class="xref">RFC4122</a>]</span>.
The request originator <span class="bcp14">SHALL</span> match the value of this header in the response with the one sent in the request. If response is not received, caller may retry sending the request with the same value of "Mailbox-Request-ID".
Relay server <span class="bcp14">SHOULD</span> store the value of the last successfully processed "Mailbox-Request-ID" for each device based on the caller's Device Claim.
A key-value pair of "Device Claim" to "Mailbox-Request-ID" is suggested to store the last successfully processed request for each device.
In case of receiving a request with duplicated "Mailbox-Request-ID", Relay <span class="bcp14">SHOULD</span> respond to the caller with status code 201, ignoring the duplicate request body content.<a href="#section-5.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="device-claim">
<section id="section-5.2">
        <h3 id="name-device-claim">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-device-claim" class="section-name selfRef">Device-Claim</a>
        </h3>
<p id="section-5.2-1">All requests to CreateMailbox, ReadSecureContentFromMailbox and UpdateMailbox endpoints <span class="bcp14">MUST</span> contain this header. The value represents "Device Claim" (refer to Terminology)<a href="#section-5.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="device-attestation">
<section id="section-5.3">
        <h3 id="name-device-attestation">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-device-attestation" class="section-name selfRef">Device-Attestation</a>
        </h3>
<p id="section-5.3-1">Request to CreateMailbox <span class="bcp14">MAY</span> contain this header. The value represents a deviceAttestation (String, Optional) - optional remote OEM device proprietary attestation data<a href="#section-5.3-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="http-access-methods">
<section id="section-6">
      <h2 id="name-http-access-methods">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-http-access-methods" class="section-name selfRef">HTTP access methods</a>
      </h2>
<div id="createmailbox">
<section id="section-6.1">
        <h3 id="name-createmailbox">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-createmailbox" class="section-name selfRef">CreateMailbox</a>
        </h3>
<p id="section-6.1-1">An application running on a remote device can invoke this API on Relay Server to create a mailbox and store secure data content to it (encrypted data specific to a provisioning partner). MailboxIdentifier is created by the Relay server as an UUID <span>[<a href="#RFC4122" class="xref">RFC4122</a>]</span>, using cryptographic entropy. A URL to the created mailbox to be returned to the caller in the response.<a href="#section-6.1-1" class="pilcrow">¶</a></p>
<div id="endpoint">
<section id="section-6.1.1">
          <h4 id="name-endpoint">
<a href="#section-6.1.1" class="section-number selfRef">6.1.1. </a><a href="#name-endpoint" class="section-name selfRef">Endpoint</a>
          </h4>
<p id="section-6.1.1-1">POST  /{version}/m<a href="#section-6.1.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="request-parameters">
<section id="section-6.1.2">
          <h4 id="name-request-parameters">
<a href="#section-6.1.2" class="section-number selfRef">6.1.2. </a><a href="#name-request-parameters" class="section-name selfRef">Request Parameters:</a>
          </h4>
<p id="section-6.1.2-1">Path parameters<a href="#section-6.1.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.1.2-2.1">version (String, Required) - the version of the API. At the time of writing this document, "v1".<a href="#section-6.1.2-2.1" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-6.1.2-3">Header parameters<a href="#section-6.1.2-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.1.2-4.1">deviceAttestation (String, Optional) - optional remote OEM device proprietary attestation data.<a href="#section-6.1.2-4.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-6.1.2-4.2">deviceClaim (String, UUID, Required) - Device Claim (refer to Terminology).<a href="#section-6.1.2-4.2" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</div>
<div id="consumes">
<section id="section-6.1.3">
          <h4 id="name-consumes">
<a href="#section-6.1.3" class="section-number selfRef">6.1.3. </a><a href="#name-consumes" class="section-name selfRef">Consumes</a>
          </h4>
<p id="section-6.1.3-1">This API call consumes the following media types via the Content-Type request header: <code>application/json</code><a href="#section-6.1.3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="produces">
<section id="section-6.1.4">
          <h4 id="name-produces">
<a href="#section-6.1.4" class="section-number selfRef">6.1.4. </a><a href="#name-produces" class="section-name selfRef">Produces</a>
          </h4>
<p id="section-6.1.4-1">This API call produces the following media types via the Content-Type response header: <code>application/json</code><a href="#section-6.1.4-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="request-body">
<section id="section-6.1.5">
          <h4 id="name-request-body">
<a href="#section-6.1.5" class="section-number selfRef">6.1.5. </a><a href="#name-request-body" class="section-name selfRef">Request body</a>
          </h4>
<p id="section-6.1.5-1">Request body is a complex structure, including the following fields:<a href="#section-6.1.5-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.1.5-2.1">
              <p id="section-6.1.5-2.1.1">payload (Object, Required) - for the purposes of Secure Credential Transfer API, this is a data structure, describing Provisioning Information specific to Credential Provider. It consists of the following 2 key-value pairs:<a href="#section-6.1.5-2.1.1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-6.1.5-2.1.2">
<li id="section-6.1.5-2.1.2.1">"type": "AEAD_AES_128_GCM" (refer to Encryption Format section).<a href="#section-6.1.5-2.1.2.1" class="pilcrow">¶</a>
</li>
                <li id="section-6.1.5-2.1.2.2">"data": BASE64-encoded binary value of ciphertext.<a href="#section-6.1.5-2.1.2.2" class="pilcrow">¶</a>
</li>
              </ol>
</li>
            <li class="normal" id="section-6.1.5-2.2">
              <p id="section-6.1.5-2.2.1">displayInformation (Object, Required) - for the purposes of the Secure Credential Transfer API, this is a data structure. It allows an application running on a receiving device to build a visual representation of the credential to show to user.
The data structure contains the following fields:<a href="#section-6.1.5-2.2.1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-6.1.5-2.2.2">
<li id="section-6.1.5-2.2.2.1">title (String, Required) - the title of the credential (e.g. "Car Key")<a href="#section-6.1.5-2.2.2.1" class="pilcrow">¶</a>
</li>
                <li id="section-6.1.5-2.2.2.2">description (String, Required) - a brief description of the credential (e.g. "a key to my personal car")<a href="#section-6.1.5-2.2.2.2" class="pilcrow">¶</a>
</li>
                <li id="section-6.1.5-2.2.2.3">imageURL (String, Required) - a link to a picture representing the credential visually.<a href="#section-6.1.5-2.2.2.3" class="pilcrow">¶</a>
</li>
              </ol>
</li>
            <li class="normal" id="section-6.1.5-2.3">
              <p id="section-6.1.5-2.3.1">notificationToken (Object, Optional) - optional notification token used to notify an appropriate remote device that the mailbox data has been updated. Data structure includes the following (if notificationToken is provided it should include both fields):<a href="#section-6.1.5-2.3.1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-6.1.5-2.3.2">
<li id="section-6.1.5-2.3.2.1">type (String, Required) - notification token name. Used to define which Push Notification System to be used to notify appropriate remote device of a mailbox data update. (E.g. "com.apple.apns" for APNS)<a href="#section-6.1.5-2.3.2.1" class="pilcrow">¶</a>
</li>
                <li id="section-6.1.5-2.3.2.2">tokenData (String, Required) - notification token data (data encoded based on specific device OEM notification service rules - e.g. HEX-encoded or Base64-encoded) - application-specific - refer to appropriate Push Notification System specification.<a href="#section-6.1.5-2.3.2.2" class="pilcrow">¶</a>
</li>
              </ol>
</li>
            <li class="normal" id="section-6.1.5-2.4">
              <p id="section-6.1.5-2.4.1">mailboxConfiguration (Object, Optional) - optional mailbox configuration, defines access rights to the mailbox, mailbox expiration time. Required at the time of the mailbox creation. OEM device may provide this data in the request, Relay server shall define a default configuration, if it is not provided in the incoming request. Data structure includes the following:<a href="#section-6.1.5-2.4.1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-6.1.5-2.4.2">
<li id="section-6.1.5-2.4.2.1">accessRights (String, Optional) - optional access rights to the mailbox for Sender and  Receiver devices. Default access to the mailbox is Read and Delete.
Value is defined as a combination of the following values: "R" - for read access, "W" - for write access, "D" - for delete access. Example" "RD" - allows to read from the mailbox and delete it.<a href="#section-6.1.5-2.4.2.1" class="pilcrow">¶</a>
</li>
                <li id="section-6.1.5-2.4.2.2">expiration (String, Required) - Mailbox expiration time in "YYYY-MM-DDThh:mm:ssZ" format (UTC time zone) <span>[<a href="#RFC3339" class="xref">RFC3339</a>]</span>. Mailbox has limited livetime. Once expired, it <span class="bcp14">SHALL</span> be deleted - refer to DeleteMailbox endpoint. Relay server <span class="bcp14">SHOULD</span> periodically check for expired mailboxes and delete them.<a href="#section-6.1.5-2.4.2.2" class="pilcrow">¶</a>
</li>
              </ol>
</li>
          </ul>
<span id="name-apple-push-token-example"></span><div id="apple-push-token">
<figure id="figure-7">
            <div class="alignLeft art-text artwork" id="section-6.1.5-3.1">
<pre>
{
   "notificationToken": {
        "type":"com.apple.apns",
        "tokenData":"APNS1234...QW"
    }
}
</pre>
</div>
<figcaption><a href="#figure-7" class="selfRef">Figure 7</a>:
<a href="#name-apple-push-token-example" class="selfRef">Apple Push Token Example</a>
            </figcaption></figure>
</div>
<span id="name-create-mailbox-request-exam"></span><div id="create-mailbox-request">
<figure id="figure-8">
            <div class="alignLeft art-text artwork" id="section-6.1.5-4.1">
<pre>
{
    "displayInformation" : {
        "title" : "Hotel Pass",
        "description" : "Some Hotel Pass",
        "imageURL" : "https://example.com/sharingImage"
    },
    "payload" : {
        "type": "AEAD_AES_128_GCM",
        "data": "FDEC...987654321"
    },
    "notificationToken" : {
        "type" : "com.apple.apns",
        "tokenData" : “APNS...1234"
    },
    "mailboxConfiguration" : {
        "accessRights" : "RWD",
        "expiration" : "2022-02-08T14:57:22Z"
    }
}
</pre>
</div>
<figcaption><a href="#figure-8" class="selfRef">Figure 8</a>:
<a href="#name-create-mailbox-request-exam" class="selfRef">Create Mailbox Request Example</a>
            </figcaption></figure>
</div>
</section>
</div>
<div id="responses">
<section id="section-6.1.6">
          <h4 id="name-responses">
<a href="#section-6.1.6" class="section-number selfRef">6.1.6. </a><a href="#name-responses" class="section-name selfRef">Responses</a>
          </h4>
<p id="section-6.1.6-1"><code>200</code>
Status: "200" (OK)<a href="#section-6.1.6-1" class="pilcrow">¶</a></p>
<p id="section-6.1.6-2">ResponseBody:<a href="#section-6.1.6-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.1.6-3.1">urlLink (String, Required) - a full URL link to the mailbox including fully qualified domain name and mailbox Identifier. Refer to "Share URL" section for details.<a href="#section-6.1.6-3.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-6.1.6-3.2">isPushNotificationSupported (boolean, Required) - indicates whether push notification is supported or not. The device uses this field to decide whether it should listen on the push topic or do long-polling.<a href="#section-6.1.6-3.2" class="pilcrow">¶</a>
</li>
          </ul>
<span id="name-create-mailbox-response-exa"></span><div id="create-mailbox-response">
<figure id="figure-9">
            <div class="alignLeft art-text artwork" id="section-6.1.6-4.1">
<pre>
{
    "urlLink":"https://relayserver.example.com/m/12345678-9...A-BCD",
    "isPushNotificationSupported":true
}
</pre>
</div>
<figcaption><a href="#figure-9" class="selfRef">Figure 9</a>:
<a href="#name-create-mailbox-response-exa" class="selfRef">Create Mailbox Response Example</a>
            </figcaption></figure>
</div>
<p id="section-6.1.6-5"><code>201</code>
Status: "201" (Created) - response to a duplicated request (duplicated "Mailbox-Request-ID"). Relay server <span class="bcp14">SHALL</span> respond to duplicated requests with 201 without creating a new mailbox. "Mailbox-Request-ID" passed in the first CreateMailbox request's header <span class="bcp14">SHOULD</span> be stored by the Relay server and compared to the same value in the subsequent requests to identify duplicated requests. If duplicate is found, Relay <span class="bcp14">SHALL</span> not create a new mailbox, but respond with 201 instead. The value of "Mailbox-Request-ID" of the last successfully completed request <span class="bcp14">SHOULD</span> be stored based on the Device Claim passed by the caller.<a href="#section-6.1.6-5" class="pilcrow">¶</a></p>
<p id="section-6.1.6-6"><code>400</code>
Bad Request - invalid request has been passed (can not parse or required fields missing).<a href="#section-6.1.6-6" class="pilcrow">¶</a></p>
<p id="section-6.1.6-7"><code>401</code>
Unauthorized - calling device is not authorized to create a mailbox. E.g. a device presented an invalid deviceClaim or deviceAttestation.<a href="#section-6.1.6-7" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="updatemailbox">
<section id="section-6.2">
        <h3 id="name-updatemailbox">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-updatemailbox" class="section-name selfRef">UpdateMailbox</a>
        </h3>
<p id="section-6.2-1">An application running on a remote device can invoke this API on Relay Server to update secure data content in an existing mailbox (encrypted data specific to a Provisioning Partner). The update effectively overwrites the secure payload previously stored in the mailbox.<a href="#section-6.2-1" class="pilcrow">¶</a></p>
<div id="endpoint-1">
<section id="section-6.2.1">
          <h4 id="name-endpoint-2">
<a href="#section-6.2.1" class="section-number selfRef">6.2.1. </a><a href="#name-endpoint-2" class="section-name selfRef">Endpoint</a>
          </h4>
<p id="section-6.2.1-1">PUT  /{version}/m/{mailboxIdentifier}<a href="#section-6.2.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="request-parameters-1">
<section id="section-6.2.2">
          <h4 id="name-request-parameters-2">
<a href="#section-6.2.2" class="section-number selfRef">6.2.2. </a><a href="#name-request-parameters-2" class="section-name selfRef">Request Parameters</a>
          </h4>
<p id="section-6.2.2-1">Path parameters:<a href="#section-6.2.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.2.2-2.1">version (String, Required) - the version of the API. At the time of writing this document, "v1".<a href="#section-6.2.2-2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-6.2.2-2.2">mailboxIdentifier(String, Required) - MailboxIdentifier (refer to Terminology).<a href="#section-6.2.2-2.2" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-6.2.2-3">Header parameters:<a href="#section-6.2.2-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.2.2-4.1">deviceAttestation (String, Optional) - optional remote OEM device proprietary attestation data.<a href="#section-6.2.2-4.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-6.2.2-4.2">deviceClaim (String, UUID, Required) - Device Claim (refer to Terminology).<a href="#section-6.2.2-4.2" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</div>
<div id="consumes-1">
<section id="section-6.2.3">
          <h4 id="name-consumes-2">
<a href="#section-6.2.3" class="section-number selfRef">6.2.3. </a><a href="#name-consumes-2" class="section-name selfRef">Consumes</a>
          </h4>
<p id="section-6.2.3-1">This API call consumes the following media types via the Content-Type request header: <code>application/json</code><a href="#section-6.2.3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="produces-1">
<section id="section-6.2.4">
          <h4 id="name-produces-2">
<a href="#section-6.2.4" class="section-number selfRef">6.2.4. </a><a href="#name-produces-2" class="section-name selfRef">Produces</a>
          </h4>
<p id="section-6.2.4-1">This API call produces following media types via the Content-Type request header: <code>application/json</code><a href="#section-6.2.4-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="request-body-1">
<section id="section-6.2.5">
          <h4 id="name-request-body-2">
<a href="#section-6.2.5" class="section-number selfRef">6.2.5. </a><a href="#name-request-body-2" class="section-name selfRef">Request body</a>
          </h4>
<p id="section-6.2.5-1">Request body is a complex structure, including the following fields:<a href="#section-6.2.5-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.2.5-2.1">
              <p id="section-6.2.5-2.1.1">payload (Object, Required) - for the purposes of Secure Credential Transfer API, this is a data structure, describing Provisioning Information specific to Credential Provider. It consists of the following 2 key-value pairs:<a href="#section-6.2.5-2.1.1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-6.2.5-2.1.2">
<li id="section-6.2.5-2.1.2.1">"type": "AEAD_AES_128_GCM" (refer to Encryption Format section).<a href="#section-6.2.5-2.1.2.1" class="pilcrow">¶</a>
</li>
                <li id="section-6.2.5-2.1.2.2">"data": BASE64-encoded binary value of ciphertext.<a href="#section-6.2.5-2.1.2.2" class="pilcrow">¶</a>
</li>
              </ol>
</li>
            <li class="normal" id="section-6.2.5-2.2">
              <p id="section-6.2.5-2.2.1">notificationToken (Object, Optional) - optional notification token used to notify an appropriate remote device that the mailbox data has been updated. Data structure includes the following (if notificationToken is provided it should include both fields):<a href="#section-6.2.5-2.2.1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-6.2.5-2.2.2">
<li id="section-6.2.5-2.2.2.1">type (String, Required) - notification token name. Used to define which Push Notification System to be used to notify appropriate remote device of a mailbox data update. (E.g. "com.apple.apns" for APNS)<a href="#section-6.2.5-2.2.2.1" class="pilcrow">¶</a>
</li>
                <li id="section-6.2.5-2.2.2.2">tokenData (String, Required) - notification token data (data encoded based on specific device OEM notification service rules - e.g. HEX-encoded or Base64-encoded) - application-specific - refer to appropriate Push Notification System specification.<a href="#section-6.2.5-2.2.2.2" class="pilcrow">¶</a>
</li>
              </ol>
</li>
          </ul>
<span id="name-update-mailbox-request-exam"></span><div id="update-mailbox-request">
<figure id="figure-10">
            <div class="alignLeft art-text artwork" id="section-6.2.5-3.1">
<pre>
{
     "payload" : {
        "type": "AEAD_AES_128_GCM",
        "data": "FDEC...987654321"
    },
    "notificationToken":{
        "type" : "com.apple.apns",
        "tokenData" : “APNS...1234"
    }
}
</pre>
</div>
<figcaption><a href="#figure-10" class="selfRef">Figure 10</a>:
<a href="#name-update-mailbox-request-exam" class="selfRef">Update Mailbox Request Example</a>
            </figcaption></figure>
</div>
</section>
</div>
<div id="responses-1">
<section id="section-6.2.6">
          <h4 id="name-responses-2">
<a href="#section-6.2.6" class="section-number selfRef">6.2.6. </a><a href="#name-responses-2" class="section-name selfRef">Responses</a>
          </h4>
<p id="section-6.2.6-1">ResponseBody:<a href="#section-6.2.6-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.2.6-2.1">isPushNotificationSupported (boolean, Required) - indicates whether push notification is supported or not. The device uses this field to decide whether it should listen on the push topic or do long-polling.<a href="#section-6.2.6-2.1" class="pilcrow">¶</a>
</li>
          </ul>
<span id="name-create-mailbox-response-exam"></span><div id="update-mailbox-response">
<figure id="figure-11">
            <div class="alignLeft art-text artwork" id="section-6.2.6-3.1">
<pre>
{
    "isPushNotificationSupported":true
}
</pre>
</div>
<figcaption><a href="#figure-11" class="selfRef">Figure 11</a>:
<a href="#name-create-mailbox-response-exam" class="selfRef">Create Mailbox Response Example</a>
            </figcaption></figure>
</div>
<p id="section-6.2.6-4"><code>200</code>
Status: "200" (OK)<a href="#section-6.2.6-4" class="pilcrow">¶</a></p>
<p id="section-6.2.6-5"><code>201</code>
Status: "201" (Created) - response to a duplicate request (duplicate "Mailbox-Request-ID"). Relay server <span class="bcp14">SHALL</span> respond to duplicate requests with 201 without performing mailbox update. "Mailbox-Request-ID" passed in the first UpdateMailbox request's header <span class="bcp14">SHALL</span> be stored by the Relay server and compared to the same value in the subsequent requests to identify duplicate requests. If duplicate is found, Relay <span class="bcp14">SHALL</span> not perform mailbox update, but respond with 201 instead.
The value of "Mailbox-Request-ID" of the last successfully completed request <span class="bcp14">SHALL</span> be stored based on the Device Claim passed by the caller.<a href="#section-6.2.6-5" class="pilcrow">¶</a></p>
<p id="section-6.2.6-6"><code>400</code>
Bad Request - invalid request has been passed (can not parse or required fields missing).<a href="#section-6.2.6-6" class="pilcrow">¶</a></p>
<p id="section-6.2.6-7"><code>401</code>
Unauthorized - calling device is not authorized to update the mailbox. E.g. a device presented the incorrect deviceClaim.<a href="#section-6.2.6-7" class="pilcrow">¶</a></p>
<p id="section-6.2.6-8"><code>404</code>
Not Found - mailbox with provided mailboxIdentifier not found.<a href="#section-6.2.6-8" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="deletemailbox">
<section id="section-6.3">
        <h3 id="name-deletemailbox">
<a href="#section-6.3" class="section-number selfRef">6.3. </a><a href="#name-deletemailbox" class="section-name selfRef">DeleteMailbox</a>
        </h3>
<p id="section-6.3-1">An application running on a remote device can invoke this API on Relay Server to close the existing mailbox after it served its purpose. Receiver or Sender device needs to present a deviceClaim in order to close the mailbox.<a href="#section-6.3-1" class="pilcrow">¶</a></p>
<div id="endpoint-2">
<section id="section-6.3.1">
          <h4 id="name-endpoint-3">
<a href="#section-6.3.1" class="section-number selfRef">6.3.1. </a><a href="#name-endpoint-3" class="section-name selfRef">Endpoint</a>
          </h4>
<p id="section-6.3.1-1">DELETE /{version}/m/{mailboxIdentifier}<a href="#section-6.3.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="request-parameters-2">
<section id="section-6.3.2">
          <h4 id="name-request-parameters-3">
<a href="#section-6.3.2" class="section-number selfRef">6.3.2. </a><a href="#name-request-parameters-3" class="section-name selfRef">Request Parameters</a>
          </h4>
<p id="section-6.3.2-1">Path parameters:<a href="#section-6.3.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.3.2-2.1">version (String, Required) - the version of the API. At the time of writing this document, "v1".<a href="#section-6.3.2-2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-6.3.2-2.2">mailboxIdentifier(String, Required) - MailboxIdentifier (refer to Terminology).<a href="#section-6.3.2-2.2" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-6.3.2-3">Header parameters:<a href="#section-6.3.2-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.3.2-4.1">deviceAttestation (String, Optional) - optional remote OEM device proprietary attestation data.<a href="#section-6.3.2-4.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-6.3.2-4.2">deviceClaim (String, UUID, Required) - Device Claim (refer to Terminology).<a href="#section-6.3.2-4.2" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</div>
<div id="responses-2">
<section id="section-6.3.3">
          <h4 id="name-responses-3">
<a href="#section-6.3.3" class="section-number selfRef">6.3.3. </a><a href="#name-responses-3" class="section-name selfRef">Responses</a>
          </h4>
<p id="section-6.3.3-1"><code>200</code>
Status: "200" (OK)<a href="#section-6.3.3-1" class="pilcrow">¶</a></p>
<p id="section-6.3.3-2"><code>401</code>
Unauthorized - calling device is not authorized to delete a mailbox. E.g. a device presented the incorrect deviceClaim.<a href="#section-6.3.3-2" class="pilcrow">¶</a></p>
<p id="section-6.3.3-3"><code>404</code>
Not Found - mailbox with provided mailboxIdentifier not found. Relay server may respond with 404 if the Mailbox Identifier passed by the caller is invalid or mailbox has already been deleted (as a result of duplicate DeleteMailbox request).<a href="#section-6.3.3-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="readdisplayinformationfrommailbox">
<section id="section-6.4">
        <h3 id="name-readdisplayinformationfromm">
<a href="#section-6.4" class="section-number selfRef">6.4. </a><a href="#name-readdisplayinformationfromm" class="section-name selfRef">ReadDisplayInformationFromMailbox</a>
        </h3>
<p id="section-6.4-1">An application running on a remote device can invoke this API on Relay Server to retrieve public display information content from a mailbox. Display Information shall be returned in OpenGraph format (please refer to https://ogp.me for details).
OpenGraph-formatted display information is required to display a preview of credential in a messaging application, e.g. iMessage or WhatsApp.<a href="#section-6.4-1" class="pilcrow">¶</a></p>
<div id="endpoint-3">
<section id="section-6.4.1">
          <h4 id="name-endpoint-4">
<a href="#section-6.4.1" class="section-number selfRef">6.4.1. </a><a href="#name-endpoint-4" class="section-name selfRef">Endpoint</a>
          </h4>
<p id="section-6.4.1-1">GET /{version}/m/{mailboxIdentifier}<a href="#section-6.4.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="request-parameters-3">
<section id="section-6.4.2">
          <h4 id="name-request-parameters-4">
<a href="#section-6.4.2" class="section-number selfRef">6.4.2. </a><a href="#name-request-parameters-4" class="section-name selfRef">Request Parameters</a>
          </h4>
<p id="section-6.4.2-1">Path parameters:<a href="#section-6.4.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.4.2-2.1">version (String, Required)- the version of the API. At the time of writing this document, "v1".<a href="#section-6.4.2-2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-6.4.2-2.2">mailboxIdentifier(String, Required) - MailboxIdentifier (refer to Terminology).<a href="#section-6.4.2-2.2" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</div>
<div id="produces-2">
<section id="section-6.4.3">
          <h4 id="name-produces-3">
<a href="#section-6.4.3" class="section-number selfRef">6.4.3. </a><a href="#name-produces-3" class="section-name selfRef">Produces</a>
          </h4>
<p id="section-6.4.3-1">This API call produces the following media types via the Content-Type response header: <code>text/html</code><a href="#section-6.4.3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="responses-3">
<section id="section-6.4.4">
          <h4 id="name-responses-4">
<a href="#section-6.4.4" class="section-number selfRef">6.4.4. </a><a href="#name-responses-4" class="section-name selfRef">Responses</a>
          </h4>
<p id="section-6.4.4-1"><code>200</code>
Status: "200" (OK)<a href="#section-6.4.4-1" class="pilcrow">¶</a></p>
<p id="section-6.4.4-2">ResponseBody :<a href="#section-6.4.4-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.4.4-3.1">displayInformation (Object, Required) - visual representation of digital credential in OpenGraph format (please refer to https://ogp.me for details).<a href="#section-6.4.4-3.1" class="pilcrow">¶</a>
</li>
          </ul>
<span id="name-read-display-information-re"></span><div id="read-display-information-response">
<figure id="figure-12">
            <div class="alignLeft art-text artwork" id="section-6.4.4-4.1">
<pre>
    "&lt;html prefix="og: https://ogp.me/ns#"&gt;
     &lt;head&gt;
     &lt;title&gt;Hotel Pass&lt;/title&gt;
     &lt;meta property="og:title" content="Hotel Pass" /&gt;
     &lt;meta property="og:type" content="image/jpeg" /&gt;
     &lt;meta property="og:description" content="Some Hotel Pass" /&gt;
     &lt;meta property="og:url" content="share://" /&gt;
     &lt;meta property="og:image" content="https://example.com/photos/photo.jpg" /&gt;
     &lt;meta property="og:image:width" content="612" /&gt;
     &lt;meta property="og:image:height" content="408" /&gt;&lt;/head&gt;
     &lt;/html&gt;"
</pre>
</div>
<figcaption><a href="#figure-12" class="selfRef">Figure 12</a>:
<a href="#name-read-display-information-re" class="selfRef">Read Display Information Response Example</a>
            </figcaption></figure>
</div>
<p id="section-6.4.4-5"><code>404</code>
Not Found - mailbox with provided mailboxIdentifier not found.<a href="#section-6.4.4-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="readsecurecontentfrommailbox">
<section id="section-6.5">
        <h3 id="name-readsecurecontentfrommailbo">
<a href="#section-6.5" class="section-number selfRef">6.5. </a><a href="#name-readsecurecontentfrommailbo" class="section-name selfRef">ReadSecureContentFromMailbox</a>
        </h3>
<p id="section-6.5-1">An application running on a remote device can invoke this API on Relay Server to retrieve secure payload content from a mailbox (encrypted data specific to a Provisioning Information Provider).<a href="#section-6.5-1" class="pilcrow">¶</a></p>
<div id="endpoint-4">
<section id="section-6.5.1">
          <h4 id="name-endpoint-5">
<a href="#section-6.5.1" class="section-number selfRef">6.5.1. </a><a href="#name-endpoint-5" class="section-name selfRef">Endpoint</a>
          </h4>
<p id="section-6.5.1-1">POST /{version}/m/{mailboxIdentifier}<a href="#section-6.5.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="request-parameters-4">
<section id="section-6.5.2">
          <h4 id="name-request-parameters-5">
<a href="#section-6.5.2" class="section-number selfRef">6.5.2. </a><a href="#name-request-parameters-5" class="section-name selfRef">Request Parameters</a>
          </h4>
<p id="section-6.5.2-1">Path parameters:<a href="#section-6.5.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.5.2-2.1">version (String, Required) - the version of the API. At the time of writing this document, "v1".<a href="#section-6.5.2-2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-6.5.2-2.2">mailboxIdentifier(String, Required) - MailboxIdentifier (refer to Terminology).<a href="#section-6.5.2-2.2" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-6.5.2-3">Header parameters:<a href="#section-6.5.2-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.5.2-4.1">deviceAttestation (String, Optional) - optional remote OEM device proprietary attestation data.<a href="#section-6.5.2-4.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-6.5.2-4.2">deviceClaim (String, UUID, Required) - Device Claim (refer to Terminology).<a href="#section-6.5.2-4.2" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</div>
<div id="produces-3">
<section id="section-6.5.3">
          <h4 id="name-produces-4">
<a href="#section-6.5.3" class="section-number selfRef">6.5.3. </a><a href="#name-produces-4" class="section-name selfRef">Produces</a>
          </h4>
<p id="section-6.5.3-1">This API call produces the following media types via the Content-Type response header: <code>application/json</code><a href="#section-6.5.3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="responses-4">
<section id="section-6.5.4">
          <h4 id="name-responses-5">
<a href="#section-6.5.4" class="section-number selfRef">6.5.4. </a><a href="#name-responses-5" class="section-name selfRef">Responses</a>
          </h4>
<p id="section-6.5.4-1"><code>200</code>
Status: "200" (OK)<a href="#section-6.5.4-1" class="pilcrow">¶</a></p>
<p id="section-6.5.4-2">ResponseBody :<a href="#section-6.5.4-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.5.4-3.1">payload (String, Required) - for the purposes of Secure Credential Transfer API, this is a JSON metadata blob, describing Provisioning Information specific to Credential Provider.<a href="#section-6.5.4-3.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-6.5.4-3.2">displayInformation (Object, Required) - for the purposes of the Secure Credential Transfer API, this is a JSON data blob. It allows an application running on a receiving device to build a visual representation of the credential to show to user. Specific to Credential Provider.<a href="#section-6.5.4-3.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-6.5.4-3.3">expiration (String, Required) - the date that the mailbox will expire. The mailbox expiration time is set during mailbox creation. Expiration time should be a complete <span>[<a href="#RFC3339" class="xref">RFC3339</a>]</span> date string in "YYYY-MM-DDThh:mm:ssZ" format (UTC time zone), and can be used to allow receiving clients to show when a share will expire.<a href="#section-6.5.4-3.3" class="pilcrow">¶</a>
</li>
          </ul>
<span id="name-read-secure-content-respons"></span><div id="read-secure-content-response">
<figure id="figure-13">
            <div class="alignLeft art-text artwork" id="section-6.5.4-4.1">
<pre>
{
    “displayInformation" : {
        "title" : "Hotel Pass",
        "description" : "Some Hotel Pass",
        "imageURL" : "https://example.com/sharingImage"
    },
    "payload" : {
        "type": "AEAD_AES_128_GCM",
        "data": "FDEC...987654321"
    },
    "expiration": "2021-11-03T20:32:34Z"
}
</pre>
</div>
<figcaption><a href="#figure-13" class="selfRef">Figure 13</a>:
<a href="#name-read-secure-content-respons" class="selfRef">Read Secure Content Response Example</a>
            </figcaption></figure>
</div>
<p id="section-6.5.4-5"><code>401</code>
Unauthorized - calling device is not authorized to read the secure content of the mailbox. E.g. a device presented the incorrect deviceClaim.<a href="#section-6.5.4-5" class="pilcrow">¶</a></p>
<p id="section-6.5.4-6"><code>404</code>
Not Found - mailbox with provided mailboxIdentifier not found.<a href="#section-6.5.4-6" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="relinquishmailbox">
<section id="section-6.6">
        <h3 id="name-relinquishmailbox">
<a href="#section-6.6" class="section-number selfRef">6.6. </a><a href="#name-relinquishmailbox" class="section-name selfRef">RelinquishMailbox</a>
        </h3>
<p id="section-6.6-1">An application running on a remote device can invoke this API on Relay Server to relinquish their ownership of the mailbox. Receiver device needs to present the currently established Receiver deviceClaim in order to relinquish their ownership of the mailbox. Once relinquished, the mailbox can be bound to a different Receiver device that presents its deviceClaim in a ReadSecureContentFromMailbox call.<a href="#section-6.6-1" class="pilcrow">¶</a></p>
<div id="endpoint-5">
<section id="section-6.6.1">
          <h4 id="name-endpoint-6">
<a href="#section-6.6.1" class="section-number selfRef">6.6.1. </a><a href="#name-endpoint-6" class="section-name selfRef">Endpoint</a>
          </h4>
<p id="section-6.6.1-1">PATCH /{version}/m/{mailboxIdentifier}<a href="#section-6.6.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="request-parameters-5">
<section id="section-6.6.2">
          <h4 id="name-request-parameters-6">
<a href="#section-6.6.2" class="section-number selfRef">6.6.2. </a><a href="#name-request-parameters-6" class="section-name selfRef">Request Parameters</a>
          </h4>
<p id="section-6.6.2-1">Path parameters:<a href="#section-6.6.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.6.2-2.1">version (String, Required) - the version of the API. At the time of writing this document, "v1".<a href="#section-6.6.2-2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-6.6.2-2.2">mailboxIdentifier(String, Required) - MailboxIdentifier (refer to Terminology).<a href="#section-6.6.2-2.2" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-6.6.2-3">Header parameters:<a href="#section-6.6.2-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.6.2-4.1">deviceAttestation (String, Optional) - optional remote OEM device proprietary attestation data.<a href="#section-6.6.2-4.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-6.6.2-4.2">deviceClaim (String, UUID, Required) - Device Claim (refer to Terminology).<a href="#section-6.6.2-4.2" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</div>
<div id="responses-5">
<section id="section-6.6.3">
          <h4 id="name-responses-6">
<a href="#section-6.6.3" class="section-number selfRef">6.6.3. </a><a href="#name-responses-6" class="section-name selfRef">Responses</a>
          </h4>
<p id="section-6.6.3-1"><code>200</code>
Status: "200" (OK)<a href="#section-6.6.3-1" class="pilcrow">¶</a></p>
<p id="section-6.6.3-2"><code>201</code>
Status: "201" (Created) - response to a duplicate request (duplicate "Mailbox-Request-ID"). Relay server <span class="bcp14">SHALL</span> respond to duplicate requests with 201 without performing mailbox relinquish. "Mailbox-Request-ID" passed in the first RelinquishMailbox request's header <span class="bcp14">SHALL</span> be stored by the Relay server and compared to the same value in the subsequent requests to identify duplicate requests. If duplicate is found, Relay <span class="bcp14">SHALL</span> not perform mailbox relinquish, but respond with 201 instead.
The value of "Mailbox-Request-ID" of the last successfully completed request <span class="bcp14">SHALL</span> be stored based on the Device Claim passed by the caller.<a href="#section-6.6.3-2" class="pilcrow">¶</a></p>
<p id="section-6.6.3-3"><code>401</code>
Unauthorized - calling device is not authorized to relinquish a mailbox. E.g. a device presented the incorrect deviceClaim, or the device is not bound to the mailbox.<a href="#section-6.6.3-3" class="pilcrow">¶</a></p>
<p id="section-6.6.3-4"><code>404</code>
Not Found - mailbox with provided mailboxIdentifier not found. Relay server may respond with 404 if the Mailbox Identifier passed by the caller is invalid.<a href="#section-6.6.3-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="security-considerations">
<section id="section-7">
      <h2 id="name-security-considerations">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-7-1">The following threats and mitigations have been considered:<a href="#section-7-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7-2.1">
          <p id="section-7-2.1.1">Sender shares with the wrong receiver<a href="#section-7-2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7-2.1.2.1">Sender <span class="bcp14">SHOULD</span> be encouraged to share Secret over a channel allowing authentication of the receiver (e.g. voice).<a href="#section-7-2.1.2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-7-2.1.2.2">Provisioning Partners <span class="bcp14">SHALL</span> allow senders to cancel existing shares.<a href="#section-7-2.1.2.2" class="pilcrow">¶</a>
</li>
          </ul>
</li>
        <li class="normal" id="section-7-2.2">
          <p id="section-7-2.2.1">Malicious receiver forwards the share to 3rd party without redeeming it or the Receiver's device is compromised.<a href="#section-7-2.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7-2.2.2.1">No mitigation, the Sender <span class="bcp14">SHOULD</span> only share with receivers they trust.<a href="#section-7-2.2.2.1" class="pilcrow">¶</a>
</li>
          </ul>
</li>
        <li class="normal" id="section-7-2.3">
          <p id="section-7-2.3.1">Malicious receiver attempts re-use share<a href="#section-7-2.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7-2.3.2.1">Provisioning Partners <span class="bcp14">SHALL</span> ensure that the Provisioning Information of a share can only be redeemed once.<a href="#section-7-2.3.2.1" class="pilcrow">¶</a>
</li>
          </ul>
</li>
        <li class="normal" id="section-7-2.4">
          <p id="section-7-2.4.1">Share URL accidental disclosure. (e.g. share URL sent as a message which gets displayed on a locked screen)<a href="#section-7-2.4.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7-2.4.2.1">Knowledge of Secret is required to access Provisioning Information and it <span class="bcp14">SHOULD</span> have been sent in a separate channel.<a href="#section-7-2.4.2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-7-2.4.2.2">Device Claim is required (if sender and receiver have already both contacted the Relay server)<a href="#section-7-2.4.2.2" class="pilcrow">¶</a>
</li>
          </ul>
</li>
        <li class="normal" id="section-7-2.5">
          <p id="section-7-2.5.1">Network attacks<a href="#section-7-2.5.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7-2.5.2.1">Machine-in-the-middle:
Relay server <span class="bcp14">SHALL</span> only allow TLS connections.
URLs displayed to user <span class="bcp14">SHOULD</span> include the https scheme.<a href="#section-7-2.5.2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-7-2.5.2.2">MailboxIdentifier guessing:
the MailboxIdentifier is a version 4 UUID <span>[<a href="#RFC4122" class="xref">RFC4122</a>]</span> which <span class="bcp14">SHOULD</span> contain 122-bits of cryptographic entropy, making brute-force attacks impractical.<a href="#section-7-2.5.2.2" class="pilcrow">¶</a>
</li>
          </ul>
</li>
        <li class="normal" id="section-7-2.6">
          <p id="section-7-2.6.1">Risk of hosting malicious or untrusted scripts by relay server preview page (ReadDisplayInformationFromMailbox)<a href="#section-7-2.6.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7-2.6.2.1">Relay server should either not allow hosting a third party JavaScripts on a preview page or implement a policy and utilize tools to maintain the trust of such scripts (e.g. force client to verify the script against a good known hash of it).<a href="#section-7-2.6.2.1" class="pilcrow">¶</a>
</li>
          </ul>
</li>
      </ul>
<div id="senderreceiver-privacy">
<section id="section-7.1">
        <h3 id="name-sender-receiver-privacy">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-sender-receiver-privacy" class="section-name selfRef">Sender/Receiver privacy</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-7.1-1.1">At no time Relay server <span class="bcp14">SHALL</span> store or track the identities of both Sender and Receiver devices.<a href="#section-7.1-1.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-7.1-1.2">The value of the Notification Token shall not contain information allowing the identification of the device providing it. It <span class="bcp14">SHOULD</span> also be different for every new share to prevent the Relay server from correlating different sharing.<a href="#section-7.1-1.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-7.1-1.3">Notification token <span class="bcp14">SHOULD</span> only inform the corresponding device that there has been a data update on the mailbox associated to it (by Device Claim). Each device <span class="bcp14">SHOULD</span> keep track of all mailboxes associated with it and make read calls to appropriate mailboxes.<a href="#section-7.1-1.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-7.1-1.4">Both Sender and Receiver devices <span class="bcp14">SHOULD</span> store the URL of the Relay server they use for an active act of credential transfer.<a href="#section-7.1-1.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-7.1-1.5">The value of DeviceAttestation header parameter <span class="bcp14">SHALL</span> not contain information allowing the identification of the device providing it. It <span class="bcp14">SHOULD</span> also be different for every new share to prevent the Relay server from correlating different sharing.<a href="#section-7.1-1.5" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-7.1-1.6">Display Information is not encrypted, therefore, it <span class="bcp14">SHOULD</span> not contain any information allowing to identify Sender or Receiver devices.<a href="#section-7.1-1.6" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="credentials-confidentiality-and-integrity">
<section id="section-7.2">
        <h3 id="name-credentials-confidentiality">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-credentials-confidentiality" class="section-name selfRef">Credential's confidentiality and integrity</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-7.2-1.1">Content of the mailbox <span class="bcp14">SHALL</span> be only visible to devices having Secret.<a href="#section-7.2-1.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-7.2-1.2">It is recommended to send URL to the mailbox and the Secret over different channels (out-of-band) from Sender device to Receiver device (e.g. send URL over SMS and Secret over iMessage).<a href="#section-7.2-1.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-7.2-1.3">Relay server <span class="bcp14">MUST</span> not receive the Secret with the MailboxIdentifier at any time.<a href="#section-7.2-1.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-7.2-1.4">Content of the mailbox <span class="bcp14">MUST</span> guaranty its integrity with cryptographic checksum (e.g. MAC, AES-GCM tag).<a href="#section-7.2-1.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-7.2-1.5">Relay server <span class="bcp14">SHALL</span> periodically check and delete expired mailboxes ( refer to expiration parameter in the CreateMailbox request).<a href="#section-7.2-1.5" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-7.2-1.6">If the Sender device sends both URL and the Secret over the same channel as a single URL,
the Sender <span class="bcp14">MUST</span> append the Secret as URI fragment <span>[<a href="#RFC3986" class="xref">RFC3986</a>]</span>, so that the resulting URL shall look as in the example below. Receiver device, upon receipt of such URL, <span class="bcp14">MUST</span> remove the Fragment (Secret) before calling the Relay server API.<a href="#section-7.2-1.6" class="pilcrow">¶</a>
</li>
        </ul>
<span id="name-example-of-url-with-secret-"></span><div id="link-with-fragment">
<figure id="figure-14">
          <div class="alignLeft art-text artwork" id="section-7.2-2.1">
<pre>
“https://relayserver.example.com/v1/m/{mailboxIdentifier}#{Secret}”
</pre>
</div>
<figcaption><a href="#figure-14" class="selfRef">Figure 14</a>:
<a href="#name-example-of-url-with-secret-" class="selfRef">Example of URL with Secret as URI Fragment</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="second-factor-authentication-for-receiver-credential-provisioning">
<section id="section-7.3">
        <h3 id="name-second-factor-authenticatio">
<a href="#section-7.3" class="section-number selfRef">7.3. </a><a href="#name-second-factor-authenticatio" class="section-name selfRef">Second factor authentication for Receiver credential provisioning</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-7.3-1.1">Provisioning Partner shall require an additional security confirmation (PIN code) from Receiver Device at the time of credential provisioning.<a href="#section-7.3-1.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-7.3-1.2">PIN code shall be generated by the Sender Device at the time when it creates a new Mailbox with Provisioning Information on a Relay Server.<a href="#section-7.3-1.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-7.3-1.3">PIN code shall be sent from Sender device to Receiver device in a secure way (preferrably over encrypted channel) out-of-band with the Mailbox URL and Secret<a href="#section-7.3-1.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-7.3-1.4">If Sender device can not send the PIN code over secure channel, it may include it into encrypted Payload stored on the relay server so that Receiver device can decrypt it and use to get Provisioning Information from Provisioning Partner.<a href="#section-7.3-1.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-7.3-1.5">Provisioning Partner shall limit the number of PIN code entry attempts at the time when Receiver device calls it in order to receive Provisioning Information.<a href="#section-7.3-1.5" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-7.3-1.6">The way PIN code is transferred between Sender device and Receiver device is defined by specific implementation and out of scope of this document.<a href="#section-7.3-1.6" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="iana-considerations">
<section id="section-8">
      <h2 id="name-iana-considerations">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-8-1">This document registers new headers, "Mailbox-Request-ID", "Mailbox-Device-Claim" and "Mailbox-Device-Attestation"
in the "Permanent Message Header Field Names" &lt;<span><a href="https://www.iana.org/assignments/message-headers">https://www.iana.org/assignments/message-headers</a></span>&gt;.<a href="#section-8-1" class="pilcrow">¶</a></p>
<span id="name-registered-http-header"></span><div id="iana-header-type-table">
<figure id="figure-15">
        <div class="alignLeft art-text artwork" id="section-8-2.1">
<pre>
    +----------------------------+----------+--------+---------------+
    | Header Field Name          | Protocol | Status |   Reference   |
    +----------------------------+----------+--------+---------------+
    | Mailbox-Request-ID         |   http   |  std   | This document |
    | Mailbox-Device-Claim       |   http   |  std   | This document |
    | Mailbox-Device-Attestation |   http   |  std   | This document |
    +----------------------------+----------+--------+---------------+
</pre>
</div>
<figcaption><a href="#figure-15" class="selfRef">Figure 15</a>:
<a href="#name-registered-http-header" class="selfRef">Registered HTTP Header</a>
        </figcaption></figure>
</div>
</section>
</div>
<section id="section-9">
      <h2 id="name-references">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-9.1">
        <h3 id="name-normative-references">
<a href="#section-9.1" class="section-number selfRef">9.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="CCC-Digital-Key-30">[CCC-Digital-Key-30]</dt>
        <dd>
<span class="refAuthor">Car Connectivity Consortium</span>, <span class="refTitle">"Digital Key – The Future of Vehicle Access"</span>, <time datetime="2021-11" class="refDate">November 2021</time>, <span>&lt;<a href="https://global-carconnectivity.org/wp-content/uploads/2021/11/CCC_Digital_Key_Whitepaper_Approved.pdf">https://global-carconnectivity.org/wp-content/uploads/2021/11/CCC_Digital_Key_Whitepaper_Approved.pdf</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="ISO-18013-5">[ISO-18013-5]</dt>
        <dd>
<span class="refAuthor">Cards and security devices for personal identification</span>, <span class="refTitle">"Personal identification — ISO-compliant driving licence — Part 5: Mobile driving licence (mDL) application"</span>, <time datetime="2021-09" class="refDate">September 2021</time>, <span>&lt;<a href="https://www.iso.org/standard/69084.html">https://www.iso.org/standard/69084.html</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3339">[RFC3339]</dt>
        <dd>
<span class="refAuthor">Klyne, G.</span> and <span class="refAuthor">C. Newman</span>, <span class="refTitle">"Date and Time on the Internet: Timestamps"</span>, <span class="seriesInfo">RFC 3339</span>, <span class="seriesInfo">DOI 10.17487/RFC3339</span>, <time datetime="2002-07" class="refDate">July 2002</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc3339">https://www.rfc-editor.org/rfc/rfc3339</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3986">[RFC3986]</dt>
        <dd>
<span class="refAuthor">Berners-Lee, T.</span>, <span class="refAuthor">Fielding, R.</span>, and <span class="refAuthor">L. Masinter</span>, <span class="refTitle">"Uniform Resource Identifier (URI): Generic Syntax"</span>, <span class="seriesInfo">STD 66</span>, <span class="seriesInfo">RFC 3986</span>, <span class="seriesInfo">DOI 10.17487/RFC3986</span>, <time datetime="2005-01" class="refDate">January 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc3986">https://www.rfc-editor.org/rfc/rfc3986</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4122">[RFC4122]</dt>
        <dd>
<span class="refAuthor">Leach, P.</span>, <span class="refAuthor">Mealling, M.</span>, and <span class="refAuthor">R. Salz</span>, <span class="refTitle">"A Universally Unique IDentifier (UUID) URN Namespace"</span>, <span class="seriesInfo">RFC 4122</span>, <span class="seriesInfo">DOI 10.17487/RFC4122</span>, <time datetime="2005-07" class="refDate">July 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc4122">https://www.rfc-editor.org/rfc/rfc4122</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5116">[RFC5116]</dt>
        <dd>
<span class="refAuthor">McGrew, D.</span>, <span class="refTitle">"An Interface and Algorithms for Authenticated Encryption"</span>, <span class="seriesInfo">RFC 5116</span>, <span class="seriesInfo">DOI 10.17487/RFC5116</span>, <time datetime="2008-01" class="refDate">January 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc5116">https://www.rfc-editor.org/rfc/rfc5116</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
      <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-9.2">
        <h3 id="name-informative-references">
<a href="#section-9.2" class="section-number selfRef">9.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="RFC2818">[RFC2818]</dt>
      <dd>
<span class="refAuthor">Rescorla, E.</span>, <span class="refTitle">"HTTP Over TLS"</span>, <span class="seriesInfo">RFC 2818</span>, <span class="seriesInfo">DOI 10.17487/RFC2818</span>, <time datetime="2000-05" class="refDate">May 2000</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2818">https://www.rfc-editor.org/rfc/rfc2818</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="contributors">
<section id="appendix-A">
      <h2 id="name-contributors">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-contributors" class="section-name selfRef">Contributors</a>
      </h2>
<p id="appendix-A-1">The following people provided substantive contributions to this document:<a href="#appendix-A-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-2.1">Ben Chester<a href="#appendix-A-2.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-2.2">Casey Astiz<a href="#appendix-A-2.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-2.3">Jean-Luc Giraud<a href="#appendix-A-2.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-2.4">Yogesh Karandikar<a href="#appendix-A-2.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-2.5">Alexey Bulgakov<a href="#appendix-A-2.5" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-2.6">Tommy Pauly<a href="#appendix-A-2.6" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-2.7">Crystal Qin<a href="#appendix-A-2.7" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-2.8">Adam Bar-Niv<a href="#appendix-A-2.8" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-2.9">Manuel Gerster<a href="#appendix-A-2.9" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-2.10">Igor Gariev<a href="#appendix-A-2.10" class="pilcrow">¶</a>
</li>
      </ul>
</section>
</div>
<div id="acknowledgments">
<section id="appendix-B">
      <h2 id="name-acknowledgments">
<a href="#appendix-B" class="section-number selfRef">Appendix B. </a><a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="appendix-B-1">TODO acknowledge.<a href="#appendix-B-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-C">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Dmitry Vinokurov</span></div>
<div dir="auto" class="left"><span class="org">Apple Inc</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:dvinokurov@apple.com" class="email">dvinokurov@apple.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Matt Byington</span></div>
<div dir="auto" class="left"><span class="org">Apple Inc</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:mbyington@apple.com" class="email">mbyington@apple.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Matthias Lerch</span></div>
<div dir="auto" class="left"><span class="org">Apple Inc</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:mlerch@apple.com" class="email">mlerch@apple.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Alex Pelletier</span></div>
<div dir="auto" class="left"><span class="org">Apple Inc</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:a_pelletier@apple.com" class="email">a_pelletier@apple.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Nick Sha</span></div>
<div dir="auto" class="left"><span class="org">Alphabet Inc</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:nicksha@google.com" class="email">nicksha@google.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
